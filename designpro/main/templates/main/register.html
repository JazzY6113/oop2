{% extends 'main/base.html' %}

{% block title %}Регистрация{% endblock %}

{% block content %}
    <h1>Регистрация</h1>
    <form method="post">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div>
            {{ form.fio.label }}<br>
            {{ form.fio }}
            {% if form.fio.errors %}
                <ul class="errorlist">
                    {% for error in form.fio.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <div>
            {{ form.username.label }}<br>
            {{ form.username }}
            {% if form.username.errors %}
                <ul class="errorlist">
                    {% for error in form.username.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <div>
            {{ form.email.label }}<br>
            {{ form.email }}
            {% if form.email.errors %}
                <ul class="errorlist">
                    {% for error in form.email.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <div>
            {{ form.password.label }}<br>
            {{ form.password }}
            {% if form.password.errors %}
                <ul class="errorlist">
                    {% for error in form.password.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <div>
            {{ form.password_confirm.label }}<br>
            {{ form.password_confirm }}
            {% if form.password_confirm.errors %}
                <ul class="errorlist">
                    {% for error in form.password_confirm.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <div>
            {{ form.consent }} {{ form.consent.label }}
            {% if form.consent.errors %}
                <ul class="errorlist">
                    {% for error in form.consent.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <br>
        <!-- Добавление капчи -->
        <div>
            <label for="captcha_input">Введите капчу:</label>
            <input type="text" name="captcha_input" id="captcha_input" required>
        </div>

        <div>
            <img src="data:image/png;base64,{{ captcha_image }}" alt="Капча">
        </div>

        <button type="submit">Зарегистрироваться</button>
    </form>
    <p>Уже есть аккаунт? <a href="{% url 'main:login' %}">Войти</a></p>
{% endblock %}